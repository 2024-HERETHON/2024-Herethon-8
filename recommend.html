<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Recommend</title>
        <link rel="stylesheet" href="./css/recommend.css" />
    </head>
    <body>
        <div class="wrap">
            <div class="container">
                <div class="bar">
                    <!--나브바 추가 시작-->
                    <nav class="nav">
                        <div class="Left">
                            <div class="Title">
                                <img src="./images/logo.svg" />
                            </div>
                            <div class="Selectbar">
                                <div class="popluar">
                                    <a href="recommend.html" class="navlink"
                                        >인기</a
                                    >
                                </div>
                                <div class="recommend">
                                    <a href="recommend.html" class="navlink"
                                        >추천</a
                                    >
                                </div>
                                <div class="writenew">
                                    <a href="writeNew.html" class="navlink"
                                        >글쓰기</a
                                    >
                                </div>
                            </div>
                        </div>
                        <div class="Right">
                            <div class="search"></div>
                            <div class="login">
                                <a href="login.html" class="navlinklogin"
                                    >마이페이지</a
                                >
                            </div>
                        </div>
                    </nav>
                    <!--나브바 추가 끝-->
                </div>
                <!-- 금주의 작가소개 -->
                <div class="writer_recommend">
                    <p class="recommend_title" id="writer_title">
                        금주의 작가 소개
                    </p>
                    <div class="writer_box">
                        <button id="writer1" class="writer">
                            <img class="writer_img" src="./images/text2.svg" />
                            <div class="writer_text">
                                <p class="writer_name">이영영</p>
                                <p class="writer_tag">#영화 #도서</p>
                            </div>
                        </button>
                        <button id="writer2" class="writer">
                            <img
                                class="writer_img"
                                src="./images/writer_recommend2.svg"
                            />
                            <div class="writer_text">
                                <p class="writer_name">과하학</p>
                                <p class="writer_tag">#과학 #영화</p>
                            </div>
                        </button>
                        <button id="writer3" class="writer">
                            <img
                                class="writer_img"
                                src="./images/writer_recommend3.svg"
                            />
                            <div class="writer_text">
                                <p class="writer_name">주개미</p>
                                <p class="writer_tag">#경제 #도서</p>
                            </div>
                        </button>
                        <button id="writer4" class="writer">
                            <img
                                class="writer_img"
                                src="./images/writer_recommend4.svg"
                            />
                            <div class="writer_text">
                                <p class="writer_name">도넛</p>
                                <p class="writer_tag">#음악 #사회</p>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- 최신 글 추천 -->
                <div class="recent_post_recommend">
                    <p class="recommend_title" id="recent_title">
                        최신 글 추천
                    </p>

                    <!-- 수정 부분-->
                    <!-- 페이지 1 -->
                    <div class="post_frame" id="post_frame">
                        <!-- 콘텐츠가 동적으로 여기에 추가됩니다 -->
                    </div>

                    <!-- 수정 부분 :기존에 안에 있던 내용들 다 삭제되서 js안 에 있습니다-->

                    <!-- 네비게이션바 -->
                    <div class="page_move_bar">
                        <button
                            id="recent_before_page"
                            class="page_move_button"
                        >
                            <img src="./images/before_page_button.svg" />
                        </button>
                        <div class="page_positon">
                            <svg
                                id="recent_page_position_svg"
                                width="50"
                                height="8"
                                viewBox="0 0 50 8"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <g id="Group 514678696">
                                    <g id="Group 427320103">
                                        <circle
                                            id="Ellipse_4769"
                                            cx="4"
                                            cy="4"
                                            r="4"
                                            fill="#5E6F52"
                                        />
                                        <circle
                                            id="Ellipse_4770"
                                            cx="16"
                                            cy="4"
                                            r="4"
                                            fill="#EEEEEE"
                                        />
                                        <circle
                                            id="Ellipse_4771"
                                            cx="28"
                                            cy="4"
                                            r="4"
                                            fill="#EEEEEE"
                                        />
                                        <circle
                                            id="Ellipse_4772"
                                            cx="39"
                                            cy="4"
                                            r="3"
                                            fill="#EEEEEE"
                                        />
                                        <circle
                                            id="Ellipse_4773"
                                            cx="48"
                                            cy="4"
                                            r="2"
                                            fill="#EEEEEE"
                                        />
                                    </g>
                                </g>
                            </svg>
                        </div>
                        <button id="recent_next_page" class="page_move_button">
                            <img src="./images/next_page_button.svg" />
                        </button>
                    </div>
                </div>

                <!-- 알고리즘 추천 전체 -->
                <div class="algorithm_post_recommend">
                    <p class="recommend_title" id="algorithm_title">
                        알고리즘 추천 전체
                    </p>
                    <!-- 수정 부분-->
                    <!-- 페이지 1 -->

                    <div class="post_frame" id="post_frame2">
                        <!-- 수정 부분 :기존에 안에 있던 내용들 다 삭제되서 js안 에 있습니다-->

                        <!-- 콘텐츠가 동적으로 여기에 추가됩니다 -->
                    </div>
                    <!-- 페이지 이동 -->
                    <div class="page_move_bar">
                        <button
                            id="algorithm_before_page"
                            class="page_move_button"
                        >
                            <img src="./images/before_page_button.svg" />
                        </button>
                        <div class="page_positon">
                            <svg
                                id="algorithm_page_position_svg"
                                width="50"
                                height="8"
                                viewBox="0 0 50 8"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <g id="Group 514678696">
                                    <g id="Group 427320103">
                                        <circle
                                            id="Ellipse_4769"
                                            cx="4"
                                            cy="4"
                                            r="4"
                                            fill="#5E6F52"
                                        />
                                        <circle
                                            id="Ellipse_4770"
                                            cx="16"
                                            cy="4"
                                            r="4"
                                            fill="#EEEEEE"
                                        />
                                        <circle
                                            id="Ellipse_4771"
                                            cx="28"
                                            cy="4"
                                            r="4"
                                            fill="#EEEEEE"
                                        />
                                        <circle
                                            id="Ellipse_4772"
                                            cx="39"
                                            cy="4"
                                            r="3"
                                            fill="#EEEEEE"
                                        />
                                        <circle
                                            id="Ellipse_4773"
                                            cx="48"
                                            cy="4"
                                            r="2"
                                            fill="#EEEEEE"
                                        />
                                    </g>
                                </g>
                            </svg>
                        </div>
                        <button
                            id="algorithm_next_page"
                            class="page_move_button"
                        >
                            <img src="./images/next_page_button.svg" />
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const recommendWriters = [
                    "writer1",
                    "writer2",
                    "writer3",
                    "writer4",
                ];

                recommendWriters.forEach((id) => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.addEventListener("click", () => {
                            window.location.href = "writerpage.html";
                        });
                    }
                });

                // 네비게이션바 이동 함수
                function setupPagination(
                    buttons,
                    circles,
                    totalPages,
                    currentPage,
                    renderFunction
                ) {
                    function updateCircles(page) {
                        circles.forEach((circle, index) => {
                            if (index === page) {
                                circle.setAttribute("r", 4);
                                circle.setAttribute("fill", "#5E6F52");
                            } else {
                                const size =
                                    4 - Math.min(3, Math.abs(index - page));
                                circle.setAttribute("r", size);
                                circle.setAttribute(
                                    "fill",
                                    size === 4 ? "#5E6F52" : "#EEEEEE"
                                );
                            }
                        });
                    }

                    buttons.prev.addEventListener("click", () => {
                        if (currentPage > 0) {
                            currentPage--;
                            renderFunction(currentPage + 1);
                            updateCircles(currentPage);
                        }
                    });

                    buttons.next.addEventListener("click", () => {
                        if (currentPage < totalPages - 1) {
                            currentPage++;
                            renderFunction(currentPage + 1);
                            updateCircles(currentPage);
                        }
                    });

                    renderFunction(currentPage + 1);
                    updateCircles(currentPage);
                }

                // 포스트 렌더링 함수
                function renderPosts(
                    postFrame,
                    postsContent,
                    page,
                    postsPerPage
                ) {
                    postFrame.innerHTML = ""; // 이전 내용 제거
                    const startIndex = (page - 1) * postsPerPage;
                    const endIndex = startIndex + postsPerPage;
                    const postsToRender = postsContent.slice(
                        startIndex,
                        endIndex
                    );

                    postsToRender.forEach((post) => {
                        postFrame.innerHTML += `
                    <button class="post">
                        <div class="post_text">
                            <div class="text_content">
                                <p class="subhead">${post.subhead}</p>
                                <p class="head">${post.head}</p>
                                <p class="post_writer">${post.writer}</p>
                            </div>
                            <div class="post_buttons">
                                <div class="post_heart">
                                    <img src="./images/post_heart.svg" />
                                    <p>${post.heart}</p>
                                </div>
                                <div class="post_comment">
                                    <img src="./images/post_comment.svg" />
                                    <p>${post.comment}</p>
                                </div>
                                <div class="post_bookmark">
                                    <img src="./images/post_bookmark.svg" />
                                    <p>${post.bookmark}</p>
                                </div>
                            </div>
                        </div>
                        <img class="post_img" src="${post.img}" />
                    </button>
                `;
                    });
                }

                // 최신 글 추천 데이터
                const recentPostsContent = [
                    {
                        subhead: "어른을 위한 애니메이션",
                        head: "돌아온 인사이드 아웃2",
                        writer: "By 으라차",
                        heart: 1,
                        comment: 0,
                        bookmark: 1,
                        img: "./images/recent_post_img1.svg",
                    },
                    {
                        subhead: "깊은 풍미와 다양한 변주",
                        head: "아메리카노",
                        writer: "By 카페사장",
                        heart: 2,
                        comment: 3,
                        bookmark: 0,
                        img: "./images/recent_post_img2.svg",
                    },
                    {
                        subhead: "제로 트렌드와 함께 건강식",
                        head: "건강한끼",
                        writer: "By 헬수",
                        heart: 3,
                        comment: 4,
                        bookmark: 2,
                        img: "./images/recent_post_img3.svg",
                    },
                    {
                        subhead: "종이와 잉크 그 이상의 것",
                        head: "책, 인간 경험의 축적물",
                        writer: "By 김식",
                        heart: 9,
                        comment: 16,
                        bookmark: 6,
                        img: "./images/recent_post_img4.svg",
                    },
                    {
                        subhead: "미드저니의 등장",
                        head: "디자이너와 AI",
                        writer: "By 챗비서",
                        heart: 7,
                        comment: 11,
                        bookmark: 3,
                        img: "./images/recent_post_img5.svg",
                    },
                    {
                        subhead: "다원예술 2024",
                        head: "우주 엘리베이터",
                        writer: "By 전시진심",
                        heart: 12,
                        comment: 14,
                        bookmark: 10,
                        img: "./images/recent_post_img6.svg",
                    },
                    {
                        subhead: "새로운 서사와 함께",
                        head: "영화 속 과학",
                        writer: "By 영화광",
                        heart: 5,
                        comment: 2,
                        bookmark: 4,
                        img: "./images/recent_post_img7.svg",
                    },
                    {
                        subhead: "기술의 진보",
                        head: "AI와 미래",
                        writer: "By 테크러버",
                        heart: 15,
                        comment: 22,
                        bookmark: 13,
                        img: "./images/recent_post_img8.svg",
                    },
                    // 나머지 포스트 추가
                ];

                // 알고리즘 추천 데이터
                const algorithmPostsContent = [
                    {
                        subhead: "한 번쯤은 모두 생각해보지 않았을까?",
                        head: "하늘은 왜 푸른걸까?",
                        writer: "By 으라차",
                        heart: 1,
                        comment: 0,
                        bookmark: 1,
                        img: "./images/algorithm_post_img1.svg",
                    },
                    {
                        subhead: "영화 '릴리 슈슈의 모든 것'",
                        head: "음악의 에테르",
                        writer: "By 슈슈",
                        heart: 993,
                        comment: 1008,
                        bookmark: 687,
                        img: "./images/algorithm_post_img2.svg",
                    },
                    {
                        subhead: "수박씨에 몸에 좋은 영양분이 풍부",
                        head: "한여름에 먹는 수박",
                        writer: "By 헬스조선",
                        heart: 3,
                        comment: 8,
                        bookmark: 0,
                        img: "./images/algorithm_post_img3.svg",
                    },
                    {
                        subhead: "노조 결렬과 노조 교섭",
                        head: "현대차, 생산 신입사원 확대",
                        writer: "By 머니투데이",
                        heart: 12,
                        comment: 30,
                        bookmark: 1,
                        img: "./images/algorithm_post_img4.svg",
                    },
                    {
                        subhead: "사교육 시장의 모든 것",
                        head: "수험생 컬트 문화",
                        writer: "By 문화일보",
                        heart: 93,
                        comment: 108,
                        bookmark: 31,
                        img: "./images/algorithm_post_img5.svg",
                    },
                    {
                        subhead: "일본의 봄날",
                        head: "오사카 벚꽃축제",
                        writer: "By 요코마",
                        heart: 764,
                        comment: 812,
                        bookmark: 54,
                        img: "./images/algorithm_post_img6.svg",
                    },
                    {
                        subhead: "일본의 봄날",
                        head: "오사카 벚꽃축제",
                        writer: "By 요코마",
                        heart: 764,
                        comment: 812,
                        bookmark: 54,
                        img: "./images/algorithm_post_img6.svg",
                    },
                    {
                        subhead: "일본의 봄날",
                        head: "오사카 벚꽃축제",
                        writer: "By 요코마",
                        heart: 764,
                        comment: 812,
                        bookmark: 54,
                        img: "./images/algorithm_post_img6.svg",
                    },
                    {
                        subhead: "일본의 봄날",
                        head: "오사카 벚꽃축제",
                        writer: "By 요코마",
                        heart: 764,
                        comment: 812,
                        bookmark: 54,
                        img: "./images/algorithm_post_img6.svg",
                    },
                    // 추가 포스트 데이터...
                ];

                // 최신 글 추천 네비게이션 설정
                setupPagination(
                    {
                        prev: document.getElementById("recent_before_page"),
                        next: document.getElementById("recent_next_page"),
                    },
                    document.querySelectorAll(
                        "#recent_page_position_svg circle"
                    ),
                    Math.ceil(recentPostsContent.length / 6),
                    0,
                    (page) =>
                        renderPosts(
                            document.getElementById("post_frame"),
                            recentPostsContent,
                            page,
                            6
                        )
                );

                // 알고리즘 추천 네비게이션 설정
                setupPagination(
                    {
                        prev: document.getElementById("algorithm_before_page"),
                        next: document.getElementById("algorithm_next_page"),
                    },
                    document.querySelectorAll(
                        "#algorithm_page_position_svg circle"
                    ),
                    Math.ceil(algorithmPostsContent.length / 6),
                    0,
                    (page) =>
                        renderPosts(
                            document.getElementById("post_frame2"),
                            algorithmPostsContent,
                            page,
                            6
                        )
                );
            });
        </script>
    </body>
</html>
